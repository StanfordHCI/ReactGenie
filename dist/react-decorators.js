"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AllGenieObjectInterfaces = exports.AllGenieDisplayedInstances = void 0;
Object.defineProperty(exports, "AllGenieObjects", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.AllGenieObjects;
  }
});
Object.defineProperty(exports, "ClassDescriptor", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.ClassDescriptor;
  }
});
exports.ClickPoints = void 0;
Object.defineProperty(exports, "DataClass", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.DataClass;
  }
});
Object.defineProperty(exports, "FieldDescriptor", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.FieldDescriptor;
  }
});
Object.defineProperty(exports, "FuncDescriptor", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.FuncDescriptor;
  }
});
Object.defineProperty(exports, "GenieClass", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.GenieClass;
  }
});
exports.GenieClassInterface = GenieClassInterface;
Object.defineProperty(exports, "GenieFunction", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.GenieFunction;
  }
});
Object.defineProperty(exports, "GenieKey", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.GenieKey;
  }
});
Object.defineProperty(exports, "GenieProperty", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.GenieProperty;
  }
});
Object.defineProperty(exports, "HelperClass", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.HelperClass;
  }
});
exports.InstantiateGenieObject = InstantiateGenieObject;
Object.defineProperty(exports, "ParamDescriptor", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.ParamDescriptor;
  }
});
exports.RetrieveInterfaces = RetrieveInterfaces;
Object.defineProperty(exports, "float", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.float;
  }
});
exports.initReactGenie = initReactGenie;
Object.defineProperty(exports, "int", {
  enumerable: true,
  get: function () {
    return _reactgenieDsl.int;
  }
});
var _genieViewWrapper = require("./genie-view-wrapper");
var _reactgenieDsl = require("reactgenie-dsl");
var _react = _interopRequireDefault(require("react"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return typeof key === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (typeof input !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (typeof res !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); } // dictionary of genie object names to genie objects
class GenieInterfacesStore {
  constructor() {
    this.supportedTypes = new Set();
    this.interfaces = {};
  }
  addInterface(element) {
    if (!this.interfaces[element.objectClassName]) {
      this.interfaces[element.objectClassName] = [];
    }
    this.interfaces[element.objectClassName].push(element);
    this.supportedTypes.add(element.objectClassName);
  }
  getObjectClassName(object) {
    if (object.constructor.name === "Array") {
      return this.getObjectClassName(object[0]) + "[]";
    }
    return object.constructor.name;
  }
  getInterfaces(object) {
    const className = this.getObjectClassName(object);
    if (this.interfaces[className]) {
      const sortedInterfaces = this.interfaces[className].sort((a, b) => {
        return b.displayPriority(object) - a.displayPriority(object);
      });
      return sortedInterfaces[0];
    }
    return null;
  }

  // key is the class name of the GenieInterfaceStoreElement, not the GenieObject
  allInterfaces() {
    const allInterfaces = {};
    for (const key in this.interfaces) {
      for (const element of this.interfaces[key]) {
        allInterfaces[element.viewClassName] = element;
      }
    }
    return allInterfaces;
  }
}
const AllGenieObjectInterfaces = new GenieInterfacesStore();
exports.AllGenieObjectInterfaces = AllGenieObjectInterfaces;
const AllGenieDisplayedInstances = {};
exports.AllGenieDisplayedInstances = AllGenieDisplayedInstances;
const ClickPoints = [];
exports.ClickPoints = ClickPoints;
function InstantiateGenieObject(objectSpec) {
  const objectClass = _reactgenieDsl.AllGenieObjects[objectSpec.className];
  return objectClass.GetObject(objectSpec.key);
}

/**
 * Get all genie class interfaces within modality provider and their rects
 * @returns {GenieInterfaceSpec[]} Retrieve all the Genie object components on the interface and their rects
 */
function RetrieveInterfaces() {
  // scan through values of AllGenieObject and get the displayedInstances
  console.log(`AllGenieObjectInterfaces ${JSON.stringify(AllGenieDisplayedInstances)}`);
  const displayedInstances = [];
  for (const key in AllGenieDisplayedInstances) {
    displayedInstances.push(AllGenieDisplayedInstances[key]());
  }
  return displayedInstances;
}
const reactGenieClassModifier = target => {
  console.log("ReactGenie Class modifier called on " + target.name);

  // append method `current()` to the class
  /**
   * Retrieves the most relevant instance of GenieObject in this context
   * @returns {any} the GenieObject
   */
  function Current() {
    const currentClassName = target.ClassDescriptor.className;
    const genieInterfaces = RetrieveInterfaces();
    if (ClickPoints.length > 0) {
      // find the genie object that is closest to the click point
      let closest = genieInterfaces[0];
      let closestDistance = Math.sqrt(Math.pow(ClickPoints[0].x - (closest.rect.x + closest.rect.width / 2), 2) + Math.pow(ClickPoints[0].y - (closest.rect.y + closest.rect.height / 2), 2));
      for (let i = 1; i < genieInterfaces.length; i++) {
        if (genieInterfaces[i].className !== currentClassName) continue;
        const distance = Math.sqrt(Math.pow(ClickPoints[0].x - (genieInterfaces[i].rect.x + genieInterfaces[i].rect.width / 2), 2) + Math.pow(ClickPoints[0].y - (genieInterfaces[i].rect.y + genieInterfaces[i].rect.height / 2), 2));
        if (distance < closestDistance) {
          closest = genieInterfaces[i];
          closestDistance = distance;
        }
      }
      return InstantiateGenieObject(closest);
    } else {
      let result = null;
      let biggestArea = 0;
      console.log(`current called with ${JSON.stringify(genieInterfaces)}`);
      for (const genieInterface of genieInterfaces) {
        if (genieInterface.className !== currentClassName) continue;
        const area = genieInterface.rect.width * genieInterface.rect.height;
        console.log();
        if (area > biggestArea) {
          result = genieInterface;
          biggestArea = area;
        }
      }
      return InstantiateGenieObject(result);
    }
  }

  // @ts-ignore
  target.Current = Current;

  // append additional function descriptor to class descriptor
  target.ClassDescriptor.functions.add(new _reactgenieDsl.FuncDescriptor("Current", [], target.ClassDescriptor.className, true));
  (0, _reactgenieDsl.genieDispatch)(() => {
    let newExamples = _reactgenieDsl.sharedState["__EXAMPLES__"] || [];
    newExamples = newExamples.concat(target.Examples);
    (0, _reactgenieDsl.setSharedState)(_objectSpread(_objectSpread({}, _reactgenieDsl.sharedState), {}, {
      ["__EXAMPLES__"]: newExamples
    }));
  });
};
function initReactGenie() {
  const reactGenieStore = (0, _reactgenieDsl.initGenie)({
    initGenieClassModifier: reactGenieClassModifier
  });
  (0, _reactgenieDsl.genieDispatch)(() => {
    const reactGenieState = _reactgenieDsl.sharedState;
    reactGenieState.navState = {
      objectViewClassName: null,
      objectConstructorParams: null
    };
    reactGenieState.navStack = 0;
    reactGenieState.message = {
      message: "",
      type: "info"
    };
  });
  return reactGenieStore;
}

/**
 *
 * @param type the type of the object being rendered by the interface
 * @param displayTitle the title of the interface, can be a function that takes in the object and returns a string
 * @param displayPriority the priority of the interface, can be a function that takes in the object and returns a number
 * @constructor
 */
function GenieClassInterface(type, displayTitle = undefined, displayPriority = 0) {
  return function (target) {
    console.log("GenieFunction decorator called on " + target.name);
    // create a function with a list of parameters
    const newTarget = (...args) => {
      return (0, _genieViewWrapper.GenieViewWrapper)(type, target, args)();
    };
    if (displayTitle === undefined) {
      displayTitle = type;
    }
    const titleFunction = typeof displayTitle === "string" ? () => displayTitle : displayTitle;
    const displayPriorityFunction = typeof displayPriority === "number" ? () => displayPriority : displayPriority;
    const newGenieInterfaceSpec = {
      objectClassName: type,
      viewClassName: target.name,
      title: titleFunction,
      function: newTarget,
      displayPriority: displayPriorityFunction
    };
    AllGenieObjectInterfaces.addInterface(newGenieInterfaceSpec);
    // add callback function with shared data structure which contains whether the element is on/off screen
    return /*#__PURE__*/_react.default.memo(newTarget);
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2VuaWVWaWV3V3JhcHBlciIsInJlcXVpcmUiLCJfcmVhY3RnZW5pZURzbCIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm93bktleXMiLCJvYmplY3QiLCJlbnVtZXJhYmxlT25seSIsImtleXMiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzeW1ib2xzIiwiZmlsdGVyIiwic3ltIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwiZm9yRWFjaCIsImtleSIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl90b1Byb3BlcnR5S2V5IiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhcmciLCJfdG9QcmltaXRpdmUiLCJTdHJpbmciLCJpbnB1dCIsImhpbnQiLCJwcmltIiwiU3ltYm9sIiwidG9QcmltaXRpdmUiLCJ1bmRlZmluZWQiLCJyZXMiLCJjYWxsIiwiVHlwZUVycm9yIiwiTnVtYmVyIiwiR2VuaWVJbnRlcmZhY2VzU3RvcmUiLCJjb25zdHJ1Y3RvciIsInN1cHBvcnRlZFR5cGVzIiwiU2V0IiwiaW50ZXJmYWNlcyIsImFkZEludGVyZmFjZSIsImVsZW1lbnQiLCJvYmplY3RDbGFzc05hbWUiLCJhZGQiLCJnZXRPYmplY3RDbGFzc05hbWUiLCJuYW1lIiwiZ2V0SW50ZXJmYWNlcyIsImNsYXNzTmFtZSIsInNvcnRlZEludGVyZmFjZXMiLCJzb3J0IiwiYSIsImIiLCJkaXNwbGF5UHJpb3JpdHkiLCJhbGxJbnRlcmZhY2VzIiwidmlld0NsYXNzTmFtZSIsIkFsbEdlbmllT2JqZWN0SW50ZXJmYWNlcyIsImV4cG9ydHMiLCJBbGxHZW5pZURpc3BsYXllZEluc3RhbmNlcyIsIkNsaWNrUG9pbnRzIiwiSW5zdGFudGlhdGVHZW5pZU9iamVjdCIsIm9iamVjdFNwZWMiLCJvYmplY3RDbGFzcyIsIkFsbEdlbmllT2JqZWN0cyIsIkdldE9iamVjdCIsIlJldHJpZXZlSW50ZXJmYWNlcyIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiZGlzcGxheWVkSW5zdGFuY2VzIiwicmVhY3RHZW5pZUNsYXNzTW9kaWZpZXIiLCJDdXJyZW50IiwiY3VycmVudENsYXNzTmFtZSIsIkNsYXNzRGVzY3JpcHRvciIsImdlbmllSW50ZXJmYWNlcyIsImNsb3Nlc3QiLCJjbG9zZXN0RGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBvdyIsIngiLCJyZWN0Iiwid2lkdGgiLCJ5IiwiaGVpZ2h0IiwiZGlzdGFuY2UiLCJyZXN1bHQiLCJiaWdnZXN0QXJlYSIsImdlbmllSW50ZXJmYWNlIiwiYXJlYSIsImZ1bmN0aW9ucyIsIkZ1bmNEZXNjcmlwdG9yIiwiZ2VuaWVEaXNwYXRjaCIsIm5ld0V4YW1wbGVzIiwic2hhcmVkU3RhdGUiLCJjb25jYXQiLCJFeGFtcGxlcyIsInNldFNoYXJlZFN0YXRlIiwiaW5pdFJlYWN0R2VuaWUiLCJyZWFjdEdlbmllU3RvcmUiLCJpbml0R2VuaWUiLCJpbml0R2VuaWVDbGFzc01vZGlmaWVyIiwicmVhY3RHZW5pZVN0YXRlIiwibmF2U3RhdGUiLCJvYmplY3RWaWV3Q2xhc3NOYW1lIiwib2JqZWN0Q29uc3RydWN0b3JQYXJhbXMiLCJuYXZTdGFjayIsIm1lc3NhZ2UiLCJ0eXBlIiwiR2VuaWVDbGFzc0ludGVyZmFjZSIsImRpc3BsYXlUaXRsZSIsIm5ld1RhcmdldCIsImFyZ3MiLCJHZW5pZVZpZXdXcmFwcGVyIiwidGl0bGVGdW5jdGlvbiIsImRpc3BsYXlQcmlvcml0eUZ1bmN0aW9uIiwibmV3R2VuaWVJbnRlcmZhY2VTcGVjIiwidGl0bGUiLCJmdW5jdGlvbiIsIlJlYWN0IiwibWVtbyJdLCJzb3VyY2VzIjpbIi4uL3NyYy9yZWFjdC1kZWNvcmF0b3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGRpY3Rpb25hcnkgb2YgZ2VuaWUgb2JqZWN0IG5hbWVzIHRvIGdlbmllIG9iamVjdHNcbmltcG9ydCB7IEdlbmllVmlld1dyYXBwZXIgfSBmcm9tIFwiLi9nZW5pZS12aWV3LXdyYXBwZXJcIjtcbmltcG9ydCB7XG4gIEZ1bmNEZXNjcmlwdG9yLFxuICBHZW5pZUNsYXNzTW9kaWZpZXIsXG4gIEdlbmllT2JqZWN0LFxuICBpbml0R2VuaWUsXG4gIGdlbmllRGlzcGF0Y2gsXG4gIEFsbEdlbmllT2JqZWN0cyxcbiAgc2hhcmVkU3RhdGUsXG4gIHNoYXJlZFN0b3JlLFxuICBzZXRTaGFyZWRTdGF0ZSxcbn0gZnJvbSBcInJlYWN0Z2VuaWUtZHNsXCI7XG5pbXBvcnQge1xuICBHZW5pZUNsYXNzLFxuICBHZW5pZUZ1bmN0aW9uLFxuICBHZW5pZUtleSxcbiAgR2VuaWVQcm9wZXJ0eSxcbiAgRGF0YUNsYXNzLFxuICBIZWxwZXJDbGFzcyxcbiAgaW50LFxuICBmbG9hdCxcbiAgQ2xhc3NEZXNjcmlwdG9yLFxuICBGaWVsZERlc2NyaXB0b3IsXG4gIFBhcmFtRGVzY3JpcHRvcixcbn0gZnJvbSBcInJlYWN0Z2VuaWUtZHNsXCI7XG5cbmV4cG9ydCB7XG4gIEdlbmllQ2xhc3MsXG4gIEdlbmllRnVuY3Rpb24sXG4gIEdlbmllS2V5LFxuICBHZW5pZVByb3BlcnR5LFxuICBEYXRhQ2xhc3MsXG4gIEhlbHBlckNsYXNzLFxuICBpbnQsXG4gIGZsb2F0LFxuICBDbGFzc0Rlc2NyaXB0b3IsXG4gIEZpZWxkRGVzY3JpcHRvcixcbiAgRnVuY0Rlc2NyaXB0b3IsXG4gIFBhcmFtRGVzY3JpcHRvcixcbn0gZnJvbSBcInJlYWN0Z2VuaWUtZHNsXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBSZWFjdEdlbmllU3RhdGUgfSBmcm9tIFwiLi9zaGFyZWQtc3RvcmVcIjtcblxuZXhwb3J0IHsgQWxsR2VuaWVPYmplY3RzIH0gZnJvbSBcInJlYWN0Z2VuaWUtZHNsXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuaWVJbnRlcmZhY2VTdG9yZUVsZW1lbnQge1xuICBvYmplY3RDbGFzc05hbWU6IHN0cmluZztcbiAgdmlld0NsYXNzTmFtZTogc3RyaW5nO1xuICB0aXRsZTogKGFueSkgPT4gc3RyaW5nO1xuICBmdW5jdGlvbjogYW55O1xuICBkaXNwbGF5UHJpb3JpdHk6ICh0YXJnZXQ6IGFueSkgPT4gbnVtYmVyO1xufVxuXG5jbGFzcyBHZW5pZUludGVyZmFjZXNTdG9yZSB7XG4gIHN1cHBvcnRlZFR5cGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBpbnRlcmZhY2VzOiB7IFtrZXk6IHN0cmluZ106IEdlbmllSW50ZXJmYWNlU3RvcmVFbGVtZW50W10gfSA9IHt9O1xuXG4gIGFkZEludGVyZmFjZShlbGVtZW50OiBHZW5pZUludGVyZmFjZVN0b3JlRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5pbnRlcmZhY2VzW2VsZW1lbnQub2JqZWN0Q2xhc3NOYW1lXSkge1xuICAgICAgdGhpcy5pbnRlcmZhY2VzW2VsZW1lbnQub2JqZWN0Q2xhc3NOYW1lXSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmludGVyZmFjZXNbZWxlbWVudC5vYmplY3RDbGFzc05hbWVdLnB1c2goZWxlbWVudCk7XG4gICAgdGhpcy5zdXBwb3J0ZWRUeXBlcy5hZGQoZWxlbWVudC5vYmplY3RDbGFzc05hbWUpO1xuICB9XG5cbiAgZ2V0T2JqZWN0Q2xhc3NOYW1lKG9iamVjdDogR2VuaWVPYmplY3QpOiBzdHJpbmcge1xuICAgIGlmIChvYmplY3QuY29uc3RydWN0b3IubmFtZSA9PT0gXCJBcnJheVwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRPYmplY3RDbGFzc05hbWUob2JqZWN0WzBdKSArIFwiW11cIjtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICB9XG5cbiAgZ2V0SW50ZXJmYWNlcyhvYmplY3Q6IEdlbmllT2JqZWN0KTogR2VuaWVJbnRlcmZhY2VTdG9yZUVsZW1lbnQge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMuZ2V0T2JqZWN0Q2xhc3NOYW1lKG9iamVjdCk7XG4gICAgaWYgKHRoaXMuaW50ZXJmYWNlc1tjbGFzc05hbWVdKSB7XG4gICAgICBjb25zdCBzb3J0ZWRJbnRlcmZhY2VzID0gdGhpcy5pbnRlcmZhY2VzW2NsYXNzTmFtZV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYi5kaXNwbGF5UHJpb3JpdHkob2JqZWN0KSAtIGEuZGlzcGxheVByaW9yaXR5KG9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzb3J0ZWRJbnRlcmZhY2VzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIGtleSBpcyB0aGUgY2xhc3MgbmFtZSBvZiB0aGUgR2VuaWVJbnRlcmZhY2VTdG9yZUVsZW1lbnQsIG5vdCB0aGUgR2VuaWVPYmplY3RcbiAgYWxsSW50ZXJmYWNlcygpOiB7IFtrZXk6IHN0cmluZ106IEdlbmllSW50ZXJmYWNlU3RvcmVFbGVtZW50IH0ge1xuICAgIGNvbnN0IGFsbEludGVyZmFjZXM6IHsgW2tleTogc3RyaW5nXTogR2VuaWVJbnRlcmZhY2VTdG9yZUVsZW1lbnQgfSA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuaW50ZXJmYWNlcykge1xuICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuaW50ZXJmYWNlc1trZXldKSB7XG4gICAgICAgIGFsbEludGVyZmFjZXNbZWxlbWVudC52aWV3Q2xhc3NOYW1lXSA9IGVsZW1lbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxJbnRlcmZhY2VzO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBBbGxHZW5pZU9iamVjdEludGVyZmFjZXM6IEdlbmllSW50ZXJmYWNlc1N0b3JlID1cbiAgbmV3IEdlbmllSW50ZXJmYWNlc1N0b3JlKCk7XG5cbmV4cG9ydCBjb25zdCBBbGxHZW5pZURpc3BsYXllZEluc3RhbmNlczoge1xuICBba2V5OiBzdHJpbmddOiAoKSA9PiBHZW5pZUludGVyZmFjZVNwZWM7XG59ID0ge307XG5cbmV4cG9ydCBjb25zdCBDbGlja1BvaW50czogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9W10gPSBbXTtcblxuaW50ZXJmYWNlIEdlbmllT2JqZWN0U3BlYyB7XG4gIGNsYXNzTmFtZTogc3RyaW5nO1xuICBrZXk6IGFueTtcbn1cblxuaW50ZXJmYWNlIEdlbmllUmVjdCB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHZW5pZUludGVyZmFjZVNwZWMgZXh0ZW5kcyBHZW5pZU9iamVjdFNwZWMge1xuICByZWN0OiBHZW5pZVJlY3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnN0YW50aWF0ZUdlbmllT2JqZWN0KG9iamVjdFNwZWM6IEdlbmllT2JqZWN0U3BlYyk6IGFueSB7XG4gIGNvbnN0IG9iamVjdENsYXNzID0gQWxsR2VuaWVPYmplY3RzW29iamVjdFNwZWMuY2xhc3NOYW1lXSBhcyB0eXBlb2YgRGF0YUNsYXNzO1xuICByZXR1cm4gb2JqZWN0Q2xhc3MuR2V0T2JqZWN0KG9iamVjdFNwZWMua2V5KTtcbn1cblxuLyoqXG4gKiBHZXQgYWxsIGdlbmllIGNsYXNzIGludGVyZmFjZXMgd2l0aGluIG1vZGFsaXR5IHByb3ZpZGVyIGFuZCB0aGVpciByZWN0c1xuICogQHJldHVybnMge0dlbmllSW50ZXJmYWNlU3BlY1tdfSBSZXRyaWV2ZSBhbGwgdGhlIEdlbmllIG9iamVjdCBjb21wb25lbnRzIG9uIHRoZSBpbnRlcmZhY2UgYW5kIHRoZWlyIHJlY3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZXRyaWV2ZUludGVyZmFjZXMoKTogR2VuaWVJbnRlcmZhY2VTcGVjW10ge1xuICAvLyBzY2FuIHRocm91Z2ggdmFsdWVzIG9mIEFsbEdlbmllT2JqZWN0IGFuZCBnZXQgdGhlIGRpc3BsYXllZEluc3RhbmNlc1xuICBjb25zb2xlLmxvZyhcbiAgICBgQWxsR2VuaWVPYmplY3RJbnRlcmZhY2VzICR7SlNPTi5zdHJpbmdpZnkoQWxsR2VuaWVEaXNwbGF5ZWRJbnN0YW5jZXMpfWBcbiAgKTtcbiAgY29uc3QgZGlzcGxheWVkSW5zdGFuY2VzOiBHZW5pZUludGVyZmFjZVNwZWNbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGtleSBpbiBBbGxHZW5pZURpc3BsYXllZEluc3RhbmNlcykge1xuICAgIGRpc3BsYXllZEluc3RhbmNlcy5wdXNoKEFsbEdlbmllRGlzcGxheWVkSW5zdGFuY2VzW2tleV0oKSk7XG4gIH1cbiAgcmV0dXJuIGRpc3BsYXllZEluc3RhbmNlcztcbn1cblxuY29uc3QgcmVhY3RHZW5pZUNsYXNzTW9kaWZpZXI6IEdlbmllQ2xhc3NNb2RpZmllciA9IChcbiAgdGFyZ2V0OiB0eXBlb2YgR2VuaWVPYmplY3RcbikgPT4ge1xuICBjb25zb2xlLmxvZyhcIlJlYWN0R2VuaWUgQ2xhc3MgbW9kaWZpZXIgY2FsbGVkIG9uIFwiICsgdGFyZ2V0Lm5hbWUpO1xuXG4gIC8vIGFwcGVuZCBtZXRob2QgYGN1cnJlbnQoKWAgdG8gdGhlIGNsYXNzXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIG1vc3QgcmVsZXZhbnQgaW5zdGFuY2Ugb2YgR2VuaWVPYmplY3QgaW4gdGhpcyBjb250ZXh0XG4gICAqIEByZXR1cm5zIHthbnl9IHRoZSBHZW5pZU9iamVjdFxuICAgKi9cbiAgZnVuY3Rpb24gQ3VycmVudCgpIHtcbiAgICBjb25zdCBjdXJyZW50Q2xhc3NOYW1lID0gdGFyZ2V0LkNsYXNzRGVzY3JpcHRvci5jbGFzc05hbWU7XG4gICAgY29uc3QgZ2VuaWVJbnRlcmZhY2VzID0gUmV0cmlldmVJbnRlcmZhY2VzKCk7XG5cbiAgICBpZiAoQ2xpY2tQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gZmluZCB0aGUgZ2VuaWUgb2JqZWN0IHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgY2xpY2sgcG9pbnRcbiAgICAgIGxldCBjbG9zZXN0ID0gZ2VuaWVJbnRlcmZhY2VzWzBdO1xuICAgICAgbGV0IGNsb3Nlc3REaXN0YW5jZSA9IE1hdGguc3FydChcbiAgICAgICAgTWF0aC5wb3coXG4gICAgICAgICAgQ2xpY2tQb2ludHNbMF0ueCAtIChjbG9zZXN0LnJlY3QueCArIGNsb3Nlc3QucmVjdC53aWR0aCAvIDIpLFxuICAgICAgICAgIDJcbiAgICAgICAgKSArXG4gICAgICAgICAgTWF0aC5wb3coXG4gICAgICAgICAgICBDbGlja1BvaW50c1swXS55IC0gKGNsb3Nlc3QucmVjdC55ICsgY2xvc2VzdC5yZWN0LmhlaWdodCAvIDIpLFxuICAgICAgICAgICAgMlxuICAgICAgICAgIClcbiAgICAgICk7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGdlbmllSW50ZXJmYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZ2VuaWVJbnRlcmZhY2VzW2ldLmNsYXNzTmFtZSAhPT0gY3VycmVudENsYXNzTmFtZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgIE1hdGgucG93KFxuICAgICAgICAgICAgQ2xpY2tQb2ludHNbMF0ueCAtXG4gICAgICAgICAgICAgIChnZW5pZUludGVyZmFjZXNbaV0ucmVjdC54ICsgZ2VuaWVJbnRlcmZhY2VzW2ldLnJlY3Qud2lkdGggLyAyKSxcbiAgICAgICAgICAgIDJcbiAgICAgICAgICApICtcbiAgICAgICAgICAgIE1hdGgucG93KFxuICAgICAgICAgICAgICBDbGlja1BvaW50c1swXS55IC1cbiAgICAgICAgICAgICAgICAoZ2VuaWVJbnRlcmZhY2VzW2ldLnJlY3QueSArXG4gICAgICAgICAgICAgICAgICBnZW5pZUludGVyZmFjZXNbaV0ucmVjdC5oZWlnaHQgLyAyKSxcbiAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBpZiAoZGlzdGFuY2UgPCBjbG9zZXN0RGlzdGFuY2UpIHtcbiAgICAgICAgICBjbG9zZXN0ID0gZ2VuaWVJbnRlcmZhY2VzW2ldO1xuICAgICAgICAgIGNsb3Nlc3REaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gSW5zdGFudGlhdGVHZW5pZU9iamVjdChjbG9zZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgICBsZXQgYmlnZ2VzdEFyZWEgPSAwO1xuICAgICAgY29uc29sZS5sb2coYGN1cnJlbnQgY2FsbGVkIHdpdGggJHtKU09OLnN0cmluZ2lmeShnZW5pZUludGVyZmFjZXMpfWApO1xuXG4gICAgICBmb3IgKGNvbnN0IGdlbmllSW50ZXJmYWNlIG9mIGdlbmllSW50ZXJmYWNlcykge1xuICAgICAgICBpZiAoZ2VuaWVJbnRlcmZhY2UuY2xhc3NOYW1lICE9PSBjdXJyZW50Q2xhc3NOYW1lKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgYXJlYSA9IGdlbmllSW50ZXJmYWNlLnJlY3Qud2lkdGggKiBnZW5pZUludGVyZmFjZS5yZWN0LmhlaWdodDtcbiAgICAgICAgY29uc29sZS5sb2coKTtcbiAgICAgICAgaWYgKGFyZWEgPiBiaWdnZXN0QXJlYSkge1xuICAgICAgICAgIHJlc3VsdCA9IGdlbmllSW50ZXJmYWNlO1xuICAgICAgICAgIGJpZ2dlc3RBcmVhID0gYXJlYTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIEluc3RhbnRpYXRlR2VuaWVPYmplY3QocmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHRhcmdldC5DdXJyZW50ID0gQ3VycmVudDtcblxuICAvLyBhcHBlbmQgYWRkaXRpb25hbCBmdW5jdGlvbiBkZXNjcmlwdG9yIHRvIGNsYXNzIGRlc2NyaXB0b3JcbiAgdGFyZ2V0LkNsYXNzRGVzY3JpcHRvci5mdW5jdGlvbnMuYWRkKFxuICAgIG5ldyBGdW5jRGVzY3JpcHRvcihcIkN1cnJlbnRcIiwgW10sIHRhcmdldC5DbGFzc0Rlc2NyaXB0b3IuY2xhc3NOYW1lLCB0cnVlKVxuICApO1xuXG4gIGdlbmllRGlzcGF0Y2goKCkgPT4ge1xuICAgIGxldCBuZXdFeGFtcGxlcyA9IHNoYXJlZFN0YXRlW1wiX19FWEFNUExFU19fXCJdIHx8IFtdO1xuICAgIG5ld0V4YW1wbGVzID0gbmV3RXhhbXBsZXMuY29uY2F0KHRhcmdldC5FeGFtcGxlcyk7XG4gICAgc2V0U2hhcmVkU3RhdGUoe1xuICAgICAgLi4uc2hhcmVkU3RhdGUsXG4gICAgICBbXCJfX0VYQU1QTEVTX19cIl06IG5ld0V4YW1wbGVzLFxuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0UmVhY3RHZW5pZSgpIHtcbiAgY29uc3QgcmVhY3RHZW5pZVN0b3JlID0gaW5pdEdlbmllKHtcbiAgICBpbml0R2VuaWVDbGFzc01vZGlmaWVyOiByZWFjdEdlbmllQ2xhc3NNb2RpZmllcixcbiAgfSk7XG4gIGdlbmllRGlzcGF0Y2goKCkgPT4ge1xuICAgIGNvbnN0IHJlYWN0R2VuaWVTdGF0ZSA9IHNoYXJlZFN0YXRlIGFzIFJlYWN0R2VuaWVTdGF0ZTtcbiAgICByZWFjdEdlbmllU3RhdGUubmF2U3RhdGUgPSB7XG4gICAgICBvYmplY3RWaWV3Q2xhc3NOYW1lOiBudWxsLFxuICAgICAgb2JqZWN0Q29uc3RydWN0b3JQYXJhbXM6IG51bGwsXG4gICAgfTtcbiAgICByZWFjdEdlbmllU3RhdGUubmF2U3RhY2sgPSAwO1xuICAgIHJlYWN0R2VuaWVTdGF0ZS5tZXNzYWdlID0ge1xuICAgICAgbWVzc2FnZTogXCJcIixcbiAgICAgIHR5cGU6IFwiaW5mb1wiLFxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gcmVhY3RHZW5pZVN0b3JlO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gdHlwZSB0aGUgdHlwZSBvZiB0aGUgb2JqZWN0IGJlaW5nIHJlbmRlcmVkIGJ5IHRoZSBpbnRlcmZhY2VcbiAqIEBwYXJhbSBkaXNwbGF5VGl0bGUgdGhlIHRpdGxlIG9mIHRoZSBpbnRlcmZhY2UsIGNhbiBiZSBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgaW4gdGhlIG9iamVjdCBhbmQgcmV0dXJucyBhIHN0cmluZ1xuICogQHBhcmFtIGRpc3BsYXlQcmlvcml0eSB0aGUgcHJpb3JpdHkgb2YgdGhlIGludGVyZmFjZSwgY2FuIGJlIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBpbiB0aGUgb2JqZWN0IGFuZCByZXR1cm5zIGEgbnVtYmVyXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEdlbmllQ2xhc3NJbnRlcmZhY2UoXG4gIHR5cGU6IHN0cmluZyxcbiAgZGlzcGxheVRpdGxlOiBzdHJpbmcgfCAoKGFueSkgPT4gc3RyaW5nKSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgZGlzcGxheVByaW9yaXR5OiBudW1iZXIgfCAoKHRhcmdldDogYW55KSA9PiBudW1iZXIpID0gMFxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdlbmllRnVuY3Rpb24gZGVjb3JhdG9yIGNhbGxlZCBvbiBcIiArIHRhcmdldC5uYW1lKTtcbiAgICAvLyBjcmVhdGUgYSBmdW5jdGlvbiB3aXRoIGEgbGlzdCBvZiBwYXJhbWV0ZXJzXG4gICAgY29uc3QgbmV3VGFyZ2V0ID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgIHJldHVybiBHZW5pZVZpZXdXcmFwcGVyKHR5cGUsIHRhcmdldCwgYXJncykoKTtcbiAgICB9O1xuICAgIGlmIChkaXNwbGF5VGl0bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGlzcGxheVRpdGxlID0gdHlwZTtcbiAgICB9XG4gICAgY29uc3QgdGl0bGVGdW5jdGlvbiA9XG4gICAgICB0eXBlb2YgZGlzcGxheVRpdGxlID09PSBcInN0cmluZ1wiID8gKCkgPT4gZGlzcGxheVRpdGxlIDogZGlzcGxheVRpdGxlO1xuICAgIGNvbnN0IGRpc3BsYXlQcmlvcml0eUZ1bmN0aW9uID1cbiAgICAgIHR5cGVvZiBkaXNwbGF5UHJpb3JpdHkgPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyAoKSA9PiBkaXNwbGF5UHJpb3JpdHlcbiAgICAgICAgOiBkaXNwbGF5UHJpb3JpdHk7XG4gICAgY29uc3QgbmV3R2VuaWVJbnRlcmZhY2VTcGVjOiBHZW5pZUludGVyZmFjZVN0b3JlRWxlbWVudCA9IHtcbiAgICAgIG9iamVjdENsYXNzTmFtZTogdHlwZSxcbiAgICAgIHZpZXdDbGFzc05hbWU6IHRhcmdldC5uYW1lLFxuICAgICAgdGl0bGU6IHRpdGxlRnVuY3Rpb24gYXMgKGFueTogYW55KSA9PiBzdHJpbmcsXG4gICAgICBmdW5jdGlvbjogbmV3VGFyZ2V0LFxuICAgICAgZGlzcGxheVByaW9yaXR5OiBkaXNwbGF5UHJpb3JpdHlGdW5jdGlvbixcbiAgICB9O1xuICAgIEFsbEdlbmllT2JqZWN0SW50ZXJmYWNlcy5hZGRJbnRlcmZhY2UobmV3R2VuaWVJbnRlcmZhY2VTcGVjKTtcbiAgICAvLyBhZGQgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aCBzaGFyZWQgZGF0YSBzdHJ1Y3R1cmUgd2hpY2ggY29udGFpbnMgd2hldGhlciB0aGUgZWxlbWVudCBpcyBvbi9vZmYgc2NyZWVuXG4gICAgcmV0dXJuIFJlYWN0Lm1lbW8obmV3VGFyZ2V0KTtcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQUFBQSxpQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBRCxPQUFBO0FBdUNBLElBQUFFLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUEwQixTQUFBRyx1QkFBQUMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLFFBQUFDLE1BQUEsRUFBQUMsY0FBQSxRQUFBQyxJQUFBLEdBQUFDLE1BQUEsQ0FBQUQsSUFBQSxDQUFBRixNQUFBLE9BQUFHLE1BQUEsQ0FBQUMscUJBQUEsUUFBQUMsT0FBQSxHQUFBRixNQUFBLENBQUFDLHFCQUFBLENBQUFKLE1BQUEsR0FBQUMsY0FBQSxLQUFBSSxPQUFBLEdBQUFBLE9BQUEsQ0FBQUMsTUFBQSxXQUFBQyxHQUFBLFdBQUFKLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsTUFBQSxFQUFBTyxHQUFBLEVBQUFFLFVBQUEsT0FBQVAsSUFBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsSUFBQSxFQUFBRyxPQUFBLFlBQUFILElBQUE7QUFBQSxTQUFBVSxjQUFBQyxNQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBQyxTQUFBLENBQUFDLE1BQUEsRUFBQUYsQ0FBQSxVQUFBRyxNQUFBLFdBQUFGLFNBQUEsQ0FBQUQsQ0FBQSxJQUFBQyxTQUFBLENBQUFELENBQUEsUUFBQUEsQ0FBQSxPQUFBZixPQUFBLENBQUFJLE1BQUEsQ0FBQWMsTUFBQSxPQUFBQyxPQUFBLFdBQUFDLEdBQUEsSUFBQUMsZUFBQSxDQUFBUCxNQUFBLEVBQUFNLEdBQUEsRUFBQUYsTUFBQSxDQUFBRSxHQUFBLFNBQUFoQixNQUFBLENBQUFrQix5QkFBQSxHQUFBbEIsTUFBQSxDQUFBbUIsZ0JBQUEsQ0FBQVQsTUFBQSxFQUFBVixNQUFBLENBQUFrQix5QkFBQSxDQUFBSixNQUFBLEtBQUFsQixPQUFBLENBQUFJLE1BQUEsQ0FBQWMsTUFBQSxHQUFBQyxPQUFBLFdBQUFDLEdBQUEsSUFBQWhCLE1BQUEsQ0FBQW9CLGNBQUEsQ0FBQVYsTUFBQSxFQUFBTSxHQUFBLEVBQUFoQixNQUFBLENBQUFLLHdCQUFBLENBQUFTLE1BQUEsRUFBQUUsR0FBQSxpQkFBQU4sTUFBQTtBQUFBLFNBQUFPLGdCQUFBeEIsR0FBQSxFQUFBdUIsR0FBQSxFQUFBSyxLQUFBLElBQUFMLEdBQUEsR0FBQU0sY0FBQSxDQUFBTixHQUFBLE9BQUFBLEdBQUEsSUFBQXZCLEdBQUEsSUFBQU8sTUFBQSxDQUFBb0IsY0FBQSxDQUFBM0IsR0FBQSxFQUFBdUIsR0FBQSxJQUFBSyxLQUFBLEVBQUFBLEtBQUEsRUFBQWYsVUFBQSxRQUFBaUIsWUFBQSxRQUFBQyxRQUFBLG9CQUFBL0IsR0FBQSxDQUFBdUIsR0FBQSxJQUFBSyxLQUFBLFdBQUE1QixHQUFBO0FBQUEsU0FBQTZCLGVBQUFHLEdBQUEsUUFBQVQsR0FBQSxHQUFBVSxZQUFBLENBQUFELEdBQUEsMkJBQUFULEdBQUEsZ0JBQUFBLEdBQUEsR0FBQVcsTUFBQSxDQUFBWCxHQUFBO0FBQUEsU0FBQVUsYUFBQUUsS0FBQSxFQUFBQyxJQUFBLGVBQUFELEtBQUEsaUJBQUFBLEtBQUEsa0JBQUFBLEtBQUEsTUFBQUUsSUFBQSxHQUFBRixLQUFBLENBQUFHLE1BQUEsQ0FBQUMsV0FBQSxPQUFBRixJQUFBLEtBQUFHLFNBQUEsUUFBQUMsR0FBQSxHQUFBSixJQUFBLENBQUFLLElBQUEsQ0FBQVAsS0FBQSxFQUFBQyxJQUFBLDJCQUFBSyxHQUFBLHNCQUFBQSxHQUFBLFlBQUFFLFNBQUEsNERBQUFQLElBQUEsZ0JBQUFGLE1BQUEsR0FBQVUsTUFBQSxFQUFBVCxLQUFBLEtBekMxQjtBQXNEQSxNQUFNVSxvQkFBb0IsQ0FBQztFQUFBQyxZQUFBO0lBQUEsS0FDekJDLGNBQWMsR0FBZ0IsSUFBSUMsR0FBRyxDQUFTLENBQUM7SUFBQSxLQUMvQ0MsVUFBVSxHQUFvRCxDQUFDLENBQUM7RUFBQTtFQUVoRUMsWUFBWUEsQ0FBQ0MsT0FBbUMsRUFBRTtJQUNoRCxJQUFJLENBQUMsSUFBSSxDQUFDRixVQUFVLENBQUNFLE9BQU8sQ0FBQ0MsZUFBZSxDQUFDLEVBQUU7TUFDN0MsSUFBSSxDQUFDSCxVQUFVLENBQUNFLE9BQU8sQ0FBQ0MsZUFBZSxDQUFDLEdBQUcsRUFBRTtJQUMvQztJQUNBLElBQUksQ0FBQ0gsVUFBVSxDQUFDRSxPQUFPLENBQUNDLGVBQWUsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDcUMsT0FBTyxDQUFDO0lBQ3RELElBQUksQ0FBQ0osY0FBYyxDQUFDTSxHQUFHLENBQUNGLE9BQU8sQ0FBQ0MsZUFBZSxDQUFDO0VBQ2xEO0VBRUFFLGtCQUFrQkEsQ0FBQ2xELE1BQW1CLEVBQVU7SUFDOUMsSUFBSUEsTUFBTSxDQUFDMEMsV0FBVyxDQUFDUyxJQUFJLEtBQUssT0FBTyxFQUFFO01BQ3ZDLE9BQU8sSUFBSSxDQUFDRCxrQkFBa0IsQ0FBQ2xELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUk7SUFDbEQ7SUFDQSxPQUFPQSxNQUFNLENBQUMwQyxXQUFXLENBQUNTLElBQUk7RUFDaEM7RUFFQUMsYUFBYUEsQ0FBQ3BELE1BQW1CLEVBQThCO0lBQzdELE1BQU1xRCxTQUFTLEdBQUcsSUFBSSxDQUFDSCxrQkFBa0IsQ0FBQ2xELE1BQU0sQ0FBQztJQUNqRCxJQUFJLElBQUksQ0FBQzZDLFVBQVUsQ0FBQ1EsU0FBUyxDQUFDLEVBQUU7TUFDOUIsTUFBTUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDVCxVQUFVLENBQUNRLFNBQVMsQ0FBQyxDQUFDRSxJQUFJLENBQUMsQ0FBQ0MsQ0FBQyxFQUFFQyxDQUFDLEtBQUs7UUFDakUsT0FBT0EsQ0FBQyxDQUFDQyxlQUFlLENBQUMxRCxNQUFNLENBQUMsR0FBR3dELENBQUMsQ0FBQ0UsZUFBZSxDQUFDMUQsTUFBTSxDQUFDO01BQzlELENBQUMsQ0FBQztNQUNGLE9BQU9zRCxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7SUFDNUI7SUFDQSxPQUFPLElBQUk7RUFDYjs7RUFFQTtFQUNBSyxhQUFhQSxDQUFBLEVBQWtEO0lBQzdELE1BQU1BLGFBQTRELEdBQUcsQ0FBQyxDQUFDO0lBQ3ZFLEtBQUssTUFBTXhDLEdBQUcsSUFBSSxJQUFJLENBQUMwQixVQUFVLEVBQUU7TUFDakMsS0FBSyxNQUFNRSxPQUFPLElBQUksSUFBSSxDQUFDRixVQUFVLENBQUMxQixHQUFHLENBQUMsRUFBRTtRQUMxQ3dDLGFBQWEsQ0FBQ1osT0FBTyxDQUFDYSxhQUFhLENBQUMsR0FBR2IsT0FBTztNQUNoRDtJQUNGO0lBQ0EsT0FBT1ksYUFBYTtFQUN0QjtBQUNGO0FBRU8sTUFBTUUsd0JBQThDLEdBQ3pELElBQUlwQixvQkFBb0IsQ0FBQyxDQUFDO0FBQUNxQixPQUFBLENBQUFELHdCQUFBLEdBQUFBLHdCQUFBO0FBRXRCLE1BQU1FLDBCQUVaLEdBQUcsQ0FBQyxDQUFDO0FBQUNELE9BQUEsQ0FBQUMsMEJBQUEsR0FBQUEsMEJBQUE7QUFFQSxNQUFNQyxXQUF1QyxHQUFHLEVBQUU7QUFBQ0YsT0FBQSxDQUFBRSxXQUFBLEdBQUFBLFdBQUE7QUFrQm5ELFNBQVNDLHNCQUFzQkEsQ0FBQ0MsVUFBMkIsRUFBTztFQUN2RSxNQUFNQyxXQUFXLEdBQUdDLDhCQUFlLENBQUNGLFVBQVUsQ0FBQ2IsU0FBUyxDQUFxQjtFQUM3RSxPQUFPYyxXQUFXLENBQUNFLFNBQVMsQ0FBQ0gsVUFBVSxDQUFDL0MsR0FBRyxDQUFDO0FBQzlDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBU21ELGtCQUFrQkEsQ0FBQSxFQUF5QjtFQUN6RDtFQUNBQyxPQUFPLENBQUNDLEdBQUcsQ0FDUiw0QkFBMkJDLElBQUksQ0FBQ0MsU0FBUyxDQUFDWCwwQkFBMEIsQ0FBRSxFQUN6RSxDQUFDO0VBQ0QsTUFBTVksa0JBQXdDLEdBQUcsRUFBRTtFQUNuRCxLQUFLLE1BQU14RCxHQUFHLElBQUk0QywwQkFBMEIsRUFBRTtJQUM1Q1ksa0JBQWtCLENBQUNqRSxJQUFJLENBQUNxRCwwQkFBMEIsQ0FBQzVDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM1RDtFQUNBLE9BQU93RCxrQkFBa0I7QUFDM0I7QUFFQSxNQUFNQyx1QkFBMkMsR0FDL0MvRCxNQUEwQixJQUN2QjtFQUNIMEQsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0NBQXNDLEdBQUczRCxNQUFNLENBQUNzQyxJQUFJLENBQUM7O0VBRWpFO0VBQ0E7QUFDRjtBQUNBO0FBQ0E7RUFDRSxTQUFTMEIsT0FBT0EsQ0FBQSxFQUFHO0lBQ2pCLE1BQU1DLGdCQUFnQixHQUFHakUsTUFBTSxDQUFDa0UsZUFBZSxDQUFDMUIsU0FBUztJQUN6RCxNQUFNMkIsZUFBZSxHQUFHVixrQkFBa0IsQ0FBQyxDQUFDO0lBRTVDLElBQUlOLFdBQVcsQ0FBQ2hELE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDMUI7TUFDQSxJQUFJaUUsT0FBTyxHQUFHRCxlQUFlLENBQUMsQ0FBQyxDQUFDO01BQ2hDLElBQUlFLGVBQWUsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQzdCRCxJQUFJLENBQUNFLEdBQUcsQ0FDTnJCLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQ3NCLENBQUMsSUFBSUwsT0FBTyxDQUFDTSxJQUFJLENBQUNELENBQUMsR0FBR0wsT0FBTyxDQUFDTSxJQUFJLENBQUNDLEtBQUssR0FBRyxDQUFDLENBQUMsRUFDNUQsQ0FDRixDQUFDLEdBQ0NMLElBQUksQ0FBQ0UsR0FBRyxDQUNOckIsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDeUIsQ0FBQyxJQUFJUixPQUFPLENBQUNNLElBQUksQ0FBQ0UsQ0FBQyxHQUFHUixPQUFPLENBQUNNLElBQUksQ0FBQ0csTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUM3RCxDQUNGLENBQ0osQ0FBQztNQUNELEtBQUssSUFBSTVFLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2tFLGVBQWUsQ0FBQ2hFLE1BQU0sRUFBRUYsQ0FBQyxFQUFFLEVBQUU7UUFDL0MsSUFBSWtFLGVBQWUsQ0FBQ2xFLENBQUMsQ0FBQyxDQUFDdUMsU0FBUyxLQUFLeUIsZ0JBQWdCLEVBQUU7UUFDdkQsTUFBTWEsUUFBUSxHQUFHUixJQUFJLENBQUNDLElBQUksQ0FDeEJELElBQUksQ0FBQ0UsR0FBRyxDQUNOckIsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDc0IsQ0FBQyxJQUNiTixlQUFlLENBQUNsRSxDQUFDLENBQUMsQ0FBQ3lFLElBQUksQ0FBQ0QsQ0FBQyxHQUFHTixlQUFlLENBQUNsRSxDQUFDLENBQUMsQ0FBQ3lFLElBQUksQ0FBQ0MsS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUNqRSxDQUNGLENBQUMsR0FDQ0wsSUFBSSxDQUFDRSxHQUFHLENBQ05yQixXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUN5QixDQUFDLElBQ2JULGVBQWUsQ0FBQ2xFLENBQUMsQ0FBQyxDQUFDeUUsSUFBSSxDQUFDRSxDQUFDLEdBQ3hCVCxlQUFlLENBQUNsRSxDQUFDLENBQUMsQ0FBQ3lFLElBQUksQ0FBQ0csTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUN2QyxDQUNGLENBQ0osQ0FBQztRQUNELElBQUlDLFFBQVEsR0FBR1QsZUFBZSxFQUFFO1VBQzlCRCxPQUFPLEdBQUdELGVBQWUsQ0FBQ2xFLENBQUMsQ0FBQztVQUM1Qm9FLGVBQWUsR0FBR1MsUUFBUTtRQUM1QjtNQUNGO01BQ0EsT0FBTzFCLHNCQUFzQixDQUFDZ0IsT0FBTyxDQUFDO0lBQ3hDLENBQUMsTUFBTTtNQUNMLElBQUlXLE1BQU0sR0FBRyxJQUFJO01BQ2pCLElBQUlDLFdBQVcsR0FBRyxDQUFDO01BQ25CdEIsT0FBTyxDQUFDQyxHQUFHLENBQUUsdUJBQXNCQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ00sZUFBZSxDQUFFLEVBQUMsQ0FBQztNQUVyRSxLQUFLLE1BQU1jLGNBQWMsSUFBSWQsZUFBZSxFQUFFO1FBQzVDLElBQUljLGNBQWMsQ0FBQ3pDLFNBQVMsS0FBS3lCLGdCQUFnQixFQUFFO1FBQ25ELE1BQU1pQixJQUFJLEdBQUdELGNBQWMsQ0FBQ1AsSUFBSSxDQUFDQyxLQUFLLEdBQUdNLGNBQWMsQ0FBQ1AsSUFBSSxDQUFDRyxNQUFNO1FBQ25FbkIsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQztRQUNiLElBQUl1QixJQUFJLEdBQUdGLFdBQVcsRUFBRTtVQUN0QkQsTUFBTSxHQUFHRSxjQUFjO1VBQ3ZCRCxXQUFXLEdBQUdFLElBQUk7UUFDcEI7TUFDRjtNQUNBLE9BQU85QixzQkFBc0IsQ0FBQzJCLE1BQU0sQ0FBQztJQUN2QztFQUNGOztFQUVBO0VBQ0EvRSxNQUFNLENBQUNnRSxPQUFPLEdBQUdBLE9BQU87O0VBRXhCO0VBQ0FoRSxNQUFNLENBQUNrRSxlQUFlLENBQUNpQixTQUFTLENBQUMvQyxHQUFHLENBQ2xDLElBQUlnRCw2QkFBYyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUVwRixNQUFNLENBQUNrRSxlQUFlLENBQUMxQixTQUFTLEVBQUUsSUFBSSxDQUMxRSxDQUFDO0VBRUQsSUFBQTZDLDRCQUFhLEVBQUMsTUFBTTtJQUNsQixJQUFJQyxXQUFXLEdBQUdDLDBCQUFXLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTtJQUNuREQsV0FBVyxHQUFHQSxXQUFXLENBQUNFLE1BQU0sQ0FBQ3hGLE1BQU0sQ0FBQ3lGLFFBQVEsQ0FBQztJQUNqRCxJQUFBQyw2QkFBYyxFQUFBM0YsYUFBQSxDQUFBQSxhQUFBLEtBQ1R3RiwwQkFBVztNQUNkLENBQUMsY0FBYyxHQUFHRDtJQUFXLEVBQzlCLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBRU0sU0FBU0ssY0FBY0EsQ0FBQSxFQUFHO0VBQy9CLE1BQU1DLGVBQWUsR0FBRyxJQUFBQyx3QkFBUyxFQUFDO0lBQ2hDQyxzQkFBc0IsRUFBRS9CO0VBQzFCLENBQUMsQ0FBQztFQUNGLElBQUFzQiw0QkFBYSxFQUFDLE1BQU07SUFDbEIsTUFBTVUsZUFBZSxHQUFHUiwwQkFBOEI7SUFDdERRLGVBQWUsQ0FBQ0MsUUFBUSxHQUFHO01BQ3pCQyxtQkFBbUIsRUFBRSxJQUFJO01BQ3pCQyx1QkFBdUIsRUFBRTtJQUMzQixDQUFDO0lBQ0RILGVBQWUsQ0FBQ0ksUUFBUSxHQUFHLENBQUM7SUFDNUJKLGVBQWUsQ0FBQ0ssT0FBTyxHQUFHO01BQ3hCQSxPQUFPLEVBQUUsRUFBRTtNQUNYQyxJQUFJLEVBQUU7SUFDUixDQUFDO0VBQ0gsQ0FBQyxDQUFDO0VBQ0YsT0FBT1QsZUFBZTtBQUN4Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNVLG1CQUFtQkEsQ0FDakNELElBQVksRUFDWkUsWUFBb0QsR0FBR2hGLFNBQVMsRUFDaEVzQixlQUFtRCxHQUFHLENBQUMsRUFDdkQ7RUFDQSxPQUFPLFVBQVU3QyxNQUFXLEVBQUU7SUFDNUIwRCxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQ0FBb0MsR0FBRzNELE1BQU0sQ0FBQ3NDLElBQUksQ0FBQztJQUMvRDtJQUNBLE1BQU1rRSxTQUFTLEdBQUdBLENBQUMsR0FBR0MsSUFBSSxLQUFLO01BQzdCLE9BQU8sSUFBQUMsa0NBQWdCLEVBQUNMLElBQUksRUFBRXJHLE1BQU0sRUFBRXlHLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUNELElBQUlGLFlBQVksS0FBS2hGLFNBQVMsRUFBRTtNQUM5QmdGLFlBQVksR0FBR0YsSUFBSTtJQUNyQjtJQUNBLE1BQU1NLGFBQWEsR0FDakIsT0FBT0osWUFBWSxLQUFLLFFBQVEsR0FBRyxNQUFNQSxZQUFZLEdBQUdBLFlBQVk7SUFDdEUsTUFBTUssdUJBQXVCLEdBQzNCLE9BQU8vRCxlQUFlLEtBQUssUUFBUSxHQUMvQixNQUFNQSxlQUFlLEdBQ3JCQSxlQUFlO0lBQ3JCLE1BQU1nRSxxQkFBaUQsR0FBRztNQUN4RDFFLGVBQWUsRUFBRWtFLElBQUk7TUFDckJ0RCxhQUFhLEVBQUUvQyxNQUFNLENBQUNzQyxJQUFJO01BQzFCd0UsS0FBSyxFQUFFSCxhQUFxQztNQUM1Q0ksUUFBUSxFQUFFUCxTQUFTO01BQ25CM0QsZUFBZSxFQUFFK0Q7SUFDbkIsQ0FBQztJQUNENUQsd0JBQXdCLENBQUNmLFlBQVksQ0FBQzRFLHFCQUFxQixDQUFDO0lBQzVEO0lBQ0Esb0JBQU9HLGNBQUssQ0FBQ0MsSUFBSSxDQUFDVCxTQUFTLENBQUM7RUFDOUIsQ0FBQztBQUNIIn0=